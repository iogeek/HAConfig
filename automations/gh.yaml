- alias: "Sunset Greenhouse lights on"
  trigger:
    - platform: sun
      event: sunset
      offset: 0
  condition: []
  action:
      - service: python_script.set_gh_stations
      data:
        stations: 'all'
        state: 'on'
#    - service: homeassistant.turn_on
#      entity_id: group.gh_plant_light_group


- alias: "Sunrise Greenhouse lights off"
  trigger:
    - platform: sun
      event: sunrise
      offset: 0
  condition: []
  action:
    - service: python_script.set_gh_stations
      data:
        stations: 'all'
        state: 'off'
#    - service: homeassistant.turn_off
#      entity_id: group.gh_plant_light_group

- alias: "Toggle Greenhouse Station"
  trigger:
    - platform: state
      entity_id:
        - input_boolean.gh_station0
        - input_boolean.gh_station1
        - input_boolean.gh_station2
        - input_boolean.gh_station3
        - input_boolean.gh_station4
        - input_boolean.gh_station5
        - input_boolean.gh_station6
        - input_boolean.gh_station7
        - input_boolean.gh_station8
        - input_boolean.gh_station9
        - input_boolean.gh_station10
        - input_boolean.gh_station11
  action:
    - service: python_script.set_gh_stations
      data:
        stations: '{{trigger.entity_id}}'
        state: '{{trigger.to_state.state}}'


# https://community.home-assistant.io/t/iterate-through-a-group/30786/3
# https://community.home-assistant.io/t/how-to-iterate-through-a-list-of-entities-and-call-service-on-each-entity/383535/7

# https://community.home-assistant.io/t/how-to-do-on-off-group-switch/30120/7